parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pvDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./basedecoder.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&t(e,r)}function t(e,r){return(t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e})(e,r)}function o(e){var r=s();return function(){var n,t=f(e);if(r){var o=f(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return a(this,n)}}function a(e,r){if(r&&("object"===p(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,h(t.key),t)}}function l(e,r,n){return r&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var r=v(e,"string");return"symbol"===p(r)?r:String(r)}function v(e,r){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!==p(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),m=4017,d=799,y=3406,w=2276,k=1567,P=3784,g=5793,T=2896;function x(e,r){for(var n=0,t=[],o=16;o>0&&!e[o-1];)--o;t.push({children:[],index:0});for(var a,i=t[0],s=0;s<o;s++){for(var f=0;f<e[s];f++){for((i=t.pop()).children[i.index]=r[n];i.index>0;)i=t.pop();for(i.index++,t.push(i);t.length<=s;)t.push(a={children:[],index:0}),i.children[i.index]=a.children,i=a;n++}s+1<o&&(t.push(a={children:[],index:0}),i.children[i.index]=a.children,i=a)}return t[0].children}function O(e,r,n,t,o,a,i,s,f){var c=n.mcusPerLine,u=n.progressive,l=r,h=r,v=0,m=0;function d(){if(m>0)return v>>--m&1;if(255===(v=e[h++])){var r=e[h++];if(r)throw new Error("unexpected marker: ".concat((v<<8|r).toString(16)))}return m=7,v>>>7}function y(e){for(var r,n=e;null!==(r=d());){if("number"==typeof(n=n[r]))return n;if("object"!==p(n))throw new Error("invalid huffman sequence")}return null}function w(e){for(var r=e,n=0;r>0;){var t=d();if(null===t)return;n=n<<1|t,--r}return n}function k(e){var r=w(e);return r>=1<<e-1?r:r+(-1<<e)+1}var P=0;var g,T=0;function x(e,r,n,t,o){var a=n%c,i=(n/c|0)*e.v+t,s=a*e.h+o;r(e,e.blocks[i][s])}function O(e,r,n){var t=n/e.blocksPerLine|0,o=n%e.blocksPerLine;r(e,e.blocks[t][o])}var C,j,A,E,L,S,_=t.length;S=u?0===a?0===s?function(e,r){var n=y(e.huffmanTableDC),t=0===n?0:k(n)<<f;e.pred+=t,r[0]=e.pred}:function(e,r){r[0]|=d()<<f}:0===s?function(e,r){if(P>0)P--;else for(var n=a,t=i;n<=t;){var o=y(e.huffmanTableAC),s=15&o,c=o>>4;if(0===s){if(c<15){P=w(c)+(1<<c)-1;break}n+=16}else r[b[n+=c]]=k(s)*(1<<f),n++}}:function(e,r){for(var n=a,t=i,o=0;n<=t;){var s=b[n],c=r[s]<0?-1:1;switch(T){case 0:var u=y(e.huffmanTableAC),l=15&u;if(o=u>>4,0===l)o<15?(P=w(o)+(1<<o),T=4):(o=16,T=1);else{if(1!==l)throw new Error("invalid ACn encoding");g=k(l),T=o?2:3}continue;case 1:case 2:r[s]?r[s]+=(d()<<f)*c:0==--o&&(T=2===T?3:0);break;case 3:r[s]?r[s]+=(d()<<f)*c:(r[s]=g<<f,T=0);break;case 4:r[s]&&(r[s]+=(d()<<f)*c)}n++}4===T&&0==--P&&(T=0)}:function(e,r){var n=y(e.huffmanTableDC),t=0===n?0:k(n);e.pred+=t,r[0]=e.pred;for(var o=1;o<64;){var a=y(e.huffmanTableAC),i=15&a,s=a>>4;if(0===i){if(s<15)break;o+=16}else r[b[o+=s]]=k(i),o++}};var D,q,I=0;q=1===_?t[0].blocksPerLine*t[0].blocksPerColumn:c*n.mcusPerColumn;for(var z=o||q;I<q;){for(j=0;j<_;j++)t[j].pred=0;if(P=0,1===_)for(C=t[0],L=0;L<z;L++)O(C,S,I),I++;else for(L=0;L<z;L++){for(j=0;j<_;j++){var M=C=t[j],R=M.h,U=M.v;for(A=0;A<U;A++)for(E=0;E<R;E++)x(C,S,I,A,E)}if(++I===q)break}if(m=0,(D=e[h]<<8|e[h+1])<65280)throw new Error("marker was not found");if(!(D>=65488&&D<=65495))break;h+=2}return h-l}function C(e,r){var n=[],t=r.blocksPerLine,o=r.blocksPerColumn,a=t<<3,i=new Int32Array(64),s=new Uint8Array(64);function f(e,n,t){var o,a,i,s,f,c,u,l,h,v,p=r.quantizationTable,b=t;for(v=0;v<64;v++)b[v]=e[v]*p[v];for(v=0;v<8;++v){var x=8*v;0!==b[1+x]||0!==b[2+x]||0!==b[3+x]||0!==b[4+x]||0!==b[5+x]||0!==b[6+x]||0!==b[7+x]?(o=g*b[0+x]+128>>8,a=g*b[4+x]+128>>8,i=b[2+x],s=b[6+x],f=T*(b[1+x]-b[7+x])+128>>8,l=T*(b[1+x]+b[7+x])+128>>8,c=b[3+x]<<4,u=b[5+x]<<4,h=o-a+1>>1,o=o+a+1>>1,a=h,h=i*P+s*k+128>>8,i=i*k-s*P+128>>8,s=h,h=f-u+1>>1,f=f+u+1>>1,u=h,h=l+c+1>>1,c=l-c+1>>1,l=h,h=o-s+1>>1,o=o+s+1>>1,s=h,h=a-i+1>>1,a=a+i+1>>1,i=h,h=f*w+l*y+2048>>12,f=f*y-l*w+2048>>12,l=h,h=c*d+u*m+2048>>12,c=c*m-u*d+2048>>12,u=h,b[0+x]=o+l,b[7+x]=o-l,b[1+x]=a+u,b[6+x]=a-u,b[2+x]=i+c,b[5+x]=i-c,b[3+x]=s+f,b[4+x]=s-f):(h=g*b[0+x]+512>>10,b[0+x]=h,b[1+x]=h,b[2+x]=h,b[3+x]=h,b[4+x]=h,b[5+x]=h,b[6+x]=h,b[7+x]=h)}for(v=0;v<8;++v){var O=v;0!==b[8+O]||0!==b[16+O]||0!==b[24+O]||0!==b[32+O]||0!==b[40+O]||0!==b[48+O]||0!==b[56+O]?(o=g*b[0+O]+2048>>12,a=g*b[32+O]+2048>>12,i=b[16+O],s=b[48+O],f=T*(b[8+O]-b[56+O])+2048>>12,l=T*(b[8+O]+b[56+O])+2048>>12,c=b[24+O],u=b[40+O],h=o-a+1>>1,o=o+a+1>>1,a=h,h=i*P+s*k+2048>>12,i=i*k-s*P+2048>>12,s=h,h=f-u+1>>1,f=f+u+1>>1,u=h,h=l+c+1>>1,c=l-c+1>>1,l=h,h=o-s+1>>1,o=o+s+1>>1,s=h,h=a-i+1>>1,a=a+i+1>>1,i=h,h=f*w+l*y+2048>>12,f=f*y-l*w+2048>>12,l=h,h=c*d+u*m+2048>>12,c=c*m-u*d+2048>>12,u=h,b[0+O]=o+l,b[56+O]=o-l,b[8+O]=a+u,b[48+O]=a-u,b[16+O]=i+c,b[40+O]=i-c,b[24+O]=s+f,b[32+O]=s-f):(h=g*t[v+0]+8192>>14,b[0+O]=h,b[8+O]=h,b[16+O]=h,b[24+O]=h,b[32+O]=h,b[40+O]=h,b[48+O]=h,b[56+O]=h)}for(v=0;v<64;++v){var C=128+(b[v]+8>>4);n[v]=C<0?0:C>255?255:C}}for(var c=0;c<o;c++){for(var u=c<<3,l=0;l<8;l++)n.push(new Uint8Array(a));for(var h=0;h<t;h++){f(r.blocks[c][h],s,i);for(var v=0,p=h<<3,b=0;b<8;b++)for(var x=n[u+b],O=0;O<8;O++)x[p+O]=s[v++]}}return n}var j=function(){function e(){c(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return l(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var r=0;function n(){var n=e[r]<<8|e[r+1];return r+=2,n}function t(e){var r,n,t=0,o=0;for(n in e.components)e.components.hasOwnProperty(n)&&(t<(r=e.components[n]).h&&(t=r.h),o<r.v&&(o=r.v));var a=Math.ceil(e.samplesPerLine/8/t),i=Math.ceil(e.scanLines/8/o);for(n in e.components)if(e.components.hasOwnProperty(n)){r=e.components[n];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*r.h/t),f=Math.ceil(Math.ceil(e.scanLines/8)*r.v/o),c=a*r.h,u=i*r.v,l=[],h=0;h<u;h++){for(var v=[],p=0;p<c;p++)v.push(new Int32Array(64));l.push(v)}r.blocksPerLine=s,r.blocksPerColumn=f,r.blocks=l}e.maxH=t,e.maxV=o,e.mcusPerLine=a,e.mcusPerColumn=i}var o,a,i=n();if(65496!==i)throw new Error("SOI not found");for(i=n();65497!==i;){switch(i){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(o=void 0,a=void 0,o=n(),a=e.subarray(r,r+o-2),r+=a.length,a);65504===i&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===i&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var f=n()+r-2;r<f;){var c=e[r++],u=new Int32Array(64);if(c>>4==0)for(var l=0;l<64;l++){u[b[l]]=e[r++]}else{if(c>>4!=1)throw new Error("DQT: invalid table spec");for(var h=0;h<64;h++){u[b[h]]=n()}}this.quantizationTables[15&c]=u}break;case 65472:case 65473:case 65474:n();for(var v={extended:65473===i,progressive:65474===i,precision:e[r++],scanLines:n(),samplesPerLine:n(),components:{},componentsOrder:[]},p=e[r++],m=void 0,d=0;d<p;d++){m=e[r];var y=e[r+1]>>4,w=15&e[r+1],k=e[r+2];v.componentsOrder.push(m),v.components[m]={h:y,v:w,quantizationIdx:k},r+=3}t(v),this.frames.push(v);break;case 65476:for(var P=n(),g=2;g<P;){for(var T=e[r++],C=new Uint8Array(16),j=0,A=0;A<16;A++,r++)C[A]=e[r],j+=C[A];for(var E=new Uint8Array(j),L=0;L<j;L++,r++)E[L]=e[r];g+=17+j,T>>4==0?this.huffmanTablesDC[15&T]=x(C,E):this.huffmanTablesAC[15&T]=x(C,E)}break;case 65501:n(),this.resetInterval=n();break;case 65498:n();for(var S=e[r++],_=[],D=this.frames[0],q=0;q<S;q++){var I=D.components[e[r++]],z=e[r++];I.huffmanTableDC=this.huffmanTablesDC[z>>4],I.huffmanTableAC=this.huffmanTablesAC[15&z],_.push(I)}var M=e[r++],R=e[r++],U=e[r++],B=O(e,r,D,_,this.resetInterval,M,R,U>>4,15&U);r+=B;break;case 65535:255!==e[r]&&r--;break;default:if(255===e[r-3]&&e[r-2]>=192&&e[r-2]<=254){r-=3;break}throw new Error("unknown JPEG marker ".concat(i.toString(16)))}i=n()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var r=0;r<this.frames.length;r++)for(var n=this.frames[r].components,t=0,o=Object.keys(n);t<o.length;t++){var a=o[t];n[a].quantizationTable=this.quantizationTables[n[a].quantizationIdx],delete n[a].quantizationIdx}for(var i=e[0],s=i.components,f=i.componentsOrder,c=[],u=i.samplesPerLine,l=i.scanLines,h=0;h<f.length;h++){var v=s[f[h]];c.push({lines:C(i,v),scaleX:v.h/i.maxH,scaleY:v.v/i.maxV})}for(var p=new Uint8Array(u*l*c.length),b=0,m=0;m<l;++m)for(var d=0;d<u;++d)for(var y=0;y<c.length;++y){var w=c[y];p[b]=w.lines[0|m*w.scaleY][0|d*w.scaleX],++b}return p}}]),e}(),A=function(r){n(a,e.default);var t=o(a);function a(e){var r;return c(this,a),(r=t.call(this)).reader=new j,e.JPEGTables&&r.reader.parse(e.JPEGTables),r}return l(a,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),a}();exports.default=A;
},{"./basedecoder.js":"Fktz"}]},{},[], null)
//# sourceMappingURL=jpeg.c9463dfc.js.map